section.attachments
    .attachments-header
        h3.attachments-title
            span.attachments-num {{vm.attachments.size}}
            span.attachments-text(translate="ATTACHMENT.SECTION_NAME")

        .add-attach(tg-check-permission="modify_us", title="{{'ATTACHMENT.ADD' | translate}}")
            span.size-info(translate="ATTACHMENT.MAX_FILE_SIZE", translate-values="{ 'maxFileSize': vm.maxFileSizeFormated}", ng-if="vm.maxFileSize")
            label.icon.icon-plus(for="add-attach")
            input(id="add-attach", type="file", multiple="multiple", ng-model="files" tg-file-change="vm.addAttachments(files)")

    .attachment-body.sortable(tg-attachments-sortable="vm.reorderAttachment(attachment, index)")
        div(tg-repeat="attachment in vm.attachments track by attachment.getIn(['file', 'id'])", tg-bind-scope)
          tg-attachment2(
                attachment="attachment",
                on-delete="vm.deleteAttachment(attachment)",
                on-update="vm.updateAttachment(attachment)"
            )

        .single-attachment(ng-repeat="file in vm.uploadingAttachments")
            .attachment-name
                a(href="", title="{{file.name}}") {{file.name}}

            .attachment-size
                span.attachment-size {{file.size | sizeFormat}}

            .attachment-comments
                span {{file.progressMessage}}
                .percentage(ng-style="{'width': file.progressPercent}")


        a.more-attachments(href="", title="{{'ATTACHMENT.SHOW_DEPRECATED' | translate}}", ng-if="vm.deprecatedsCount > 0", ng-click="vm.toggleDeprecatedsVisible()")
            span.text(ng-show="!vm.deprecatedsVisible", translate="ATTACHMENT.SHOW_DEPRECATED")
            span.text(ng-show="vm.deprecatedsVisible", translate="ATTACHMENT.HIDE_DEPRECATED")
            span.more-attachments-num(translate="ATTACHMENT.COUNT_DEPRECATED", translate-values="{counter: '{{vm.deprecatedsCount}}'}")
